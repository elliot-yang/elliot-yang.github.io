---
title: 数据库隔离中的脏读、不可重复读、幻读
date: 2020-03-08 11:50:58
tags:
---
#### 注意： 以下的修改指insert、update和delete，提交包括正常的commit操作以及rollback回滚操作。

<!--more-->


### 传统关系型数据库在事务上有四种隔离策略：

1. Serializable： 串行，即简单将所有事务串行的执行，这种方式完全遵循ACID原则，确保每个事务之间完全隔离，但消耗大效率低，一般不会使用该种隔离。

2. Repeatable Read： 重复读，确保一个事务不会修改另一个事务已读取的记录，在MySQL数据库中默认使用该隔离策略。

3. Read Committed： 提交读，确保一个事务不会读取到另一个事务已修改但未提交的数据，大部分数据默认采用该种隔离。

4. Read Uncommitted： 未提交读，一个事务已修改但未提交的数据也能被其他事务读取，最为宽松的隔离策略。

### 数据库事务中又有三种最易发生的问题：

- 脏读：顾名思义，即是读取到了脏数据，脏数据指在其他事务中进行了修改但未提交的记录。

- 不可重复读：不可重复读是指在一个事务A中，进行了数据读取之后，其他事务对这些数据进行了修改，导致事务A在后一次的数据读取中发现两次读取到的数据不匹配。

- 幻读：幻读指一个事务A通过条件查询到n条数据之后其他事务对数据进行了修改，导致事务A在下一次使用相同条件查询时获取到的数据条数和n不相同。

### 隔离级别及三种问题之间的关系

|   | 脏读  | 不可重复读  | 幻读  |
| ------------ | ------------ | ------------ | ------------ |
|  Serializable     | ×  | ×  | ×  |
|  Repeatable Read  | ×  | ×  | √  |
|  Read Committed   | ×  | √  | √  |
|  Read Uncommitted | √  | √  | √  |

> √代表可能发生， ×代表不会发生
